<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5Î¿ Î“Î•Î› Î‘Î³ÏÎ¹Î½Î¯Î¿Ï…</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --blue: #3f51b5; --magenta: #e91e63; --purple: #9c27b0; --yt-red: #FF0000; --bg: #f4f7f6; }
        body { font-family: 'Open Sans', sans-serif; margin: 0; background: var(--bg); color: #333; scroll-behavior: smooth; }
        
        header { background: white; padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .logo-area { display: flex; align-items: center; gap: 12px; }
        .logo-area img { height: 60px; }
        
        nav { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
        nav a { text-decoration: none; color: var(--blue); font-weight: bold; font-size: 0.8rem; transition: 0.3s; }
        nav a:hover { color: var(--magenta); }
        
        .lang-btn { background: var(--magenta); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        .hero { background: linear-gradient(135deg, var(--blue), var(--purple)); color: white; text-align: center; padding: 40px 20px; }
        
        .container { max-width: 1300px; margin: 30px auto; padding: 0 20px; display: grid; grid-template-columns: 7.5fr 2.5fr; gap: 40px; }
        .section-card { background: white; border-radius: 12px; padding: 30px; margin-bottom: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        
        h2 { font-family: 'Comfortaa'; color: var(--blue); border-left: 5px solid var(--magenta); padding-left: 15px; margin-bottom: 20px; }
        
        .school-gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .school-gallery img { width: 100%; height: 140px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        
        #sch-text { white-space: pre-line; line-height: 1.7; color: #444; font-size: 0.95rem; margin-bottom: 20px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        #data-activities { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); } 

        .item-card { border: 1px solid #eee; border-radius: 12px; overflow: hidden; background: white; transition: 0.3s; display: flex; flex-direction: column; }
        .item-card img { width: 100%; height: 150px; object-fit: cover; cursor: pointer; }
        .erasmus-logo { object-fit: contain !important; background: #f9f9f9; padding: 10px; }

        .item-card h3 a, .news-item h4 a { text-decoration: none; color: var(--blue); transition: 0.3s; }
        .item-card h3 a:hover, .news-item h4 a:hover { color: var(--magenta); }

        .date-badge { font-size: 0.7rem; color: #888; font-weight: bold; margin-bottom: 5px; display: block; text-transform: uppercase; }
        
        .btn-more { display: inline-block; background: var(--blue); color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; transition: 0.3s; border: none; cursor: pointer; margin-top: 20px; }
        .btn-more:hover { background: var(--magenta); transform: translateY(-2px); }
        
        .social-links { margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap; }
        .social-links a { padding: 10px 18px; border-radius: 5px; color: white; text-decoration: none; font-weight: bold; font-size: 0.85rem; transition: 0.3s; }
        
        .news-item { background:#fff; border-left:4px solid var(--magenta); padding:15px; margin-bottom:15px; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.05); }

        /* Lightbox & Pop-up Gallery */
        #lightbox, #gallery-popup { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        #lightbox img { max-width: 90%; max-height: 80%; border: 3px solid white; }
        
        /* Pop-up Slider Styles */
        #gallery-popup .popup-content { background: white; width: 80%; max-width: 800px; padding: 40px; border-radius: 12px; position: relative; text-align: center; }
        #gallery-popup .close-btn { position: absolute; top: 10px; right: 20px; font-size: 30px; cursor: pointer; color: #333; }
        .slider-container { position: relative; display: flex; align-items: center; justify-content: center; }
        .slider-img { width: 100%; max-height: 500px; object-fit: contain; border-radius: 8px; }
        .nav-btn { position: absolute; background: rgba(63, 81, 181, 0.7); color: white; border: none; padding: 15px; cursor: pointer; border-radius: 50%; font-size: 20px; transition: 0.3s; top: 50%; transform: translateY(-50%); }
        .nav-btn:hover { background: var(--magenta); }
        .prev-btn { left: -25px; }
        .next-btn { right: -25px; }

        @media (max-width: 1000px) { .container { grid-template-columns: 1fr; } .nav-btn { padding: 10px; } }
    </style>
</head>
<body>

<header>
    <div class="logo-area">
        <img src="5_HS_Agrinio_small.png" alt="Logo">
        <span id="site-title" style="font-family:'Comfortaa'; font-weight:bold; color:var(--blue);">5Î¿ Î“Î•Î› Î‘Î³ÏÎ¹Î½Î¯Î¿Ï…</span>
    </div>
    <nav id="main-nav"></nav>
    <button class="lang-btn" onclick="toggleLang()">EN</button>
</header>

<section class="hero"><h1 id="hero-title"></h1></section>

<div class="container">
    <main>
        <section id="home" class="section-card">
            <h2 id="dir-title"></h2>
            <p id="dir-msg" style="white-space: pre-line; font-style: italic;"></p>
        </section>
        
        <section id="school" class="section-card">
            <h2 id="sch-title"></h2>
            <div class="school-gallery">
                <img src="school1.jpg" onclick="openLightbox(this.src)"><img src="school2.jpg" onclick="openLightbox(this.src)">
                <img src="school3.jpg" onclick="openLightbox(this.src)"><img src="school4.jpg" onclick="openLightbox(this.src)">
                <img src="school5.jpg" onclick="openLightbox(this.src)"><img src="school6.jpg" onclick="openLightbox(this.src)">
            </div>
            <button class="btn-more" onclick="openGalleryPopup()" id="more-photos-btn"></button>
            <div id="sch-text"></div>
            <a href="https://drive.google.com/file/d/1PnjvnAjdiVgyTsCaBQiECdF14dt53QmM/view?usp=sharing" target="_blank" class="btn-more" id="sch-link" style="background:var(--blue);"></a>
        </section>

        <section id="erasmus" class="section-card">
            <h2 id="era-title"></h2>
            <div id="data-erasmus" class="grid"></div>
            <button class="btn-more" id="old-era-btn" onclick="showArchive('erasmus')"></button>
        </section>

        <section id="awards" class="section-card">
            <h2 id="awa-title"></h2>
            <div id="data-awards" class="grid"></div>
            <button class="btn-more" id="old-awa-btn" onclick="showArchive('awards')"></button>
        </section>

        <section id="activities" class="section-card">
            <h2 id="act-title"></h2>
            <div id="data-activities" class="grid"></div>
            <button class="btn-more" id="old-act-btn" onclick="showArchive('activities')"></button>
        </section>
        
        <section id="contact" class="section-card">
            <h2 id="con-title"></h2>
            <div id="contact-details"></div>
            <div class="social-links">
                <a href="https://www.facebook.com/5HighSchoolAgrinioGR/" target="_blank" style="background:#3b5998;">Facebook</a>
                <a href="https://www.instagram.com/5lykagrin/" target="_blank" style="background:#e4405f;">Instagram</a>
                <a href="https://www.youtube.com/@5-5highschoolofagrinio90" target="_blank" style="background:var(--yt-red);">YouTube</a>
            </div>
            <iframe src="http://googleusercontent.com/maps.google.com/8" width="100%" height="300" style="border:0; border-radius:8px;" allowfullscreen="" loading="lazy"></iframe>
        </section>
    </main>

    <aside id="news-section">
        <div class="section-card">
            <h2 id="news-title" style="font-size: 1.1rem;"></h2>
            <div id="data-news"></div>
            <button class="btn-more" onclick="showArchive('news')" id="old-news-btn"></button>
            <hr style="margin:20px 0;">
            <div class="fb-page" data-href="https://www.facebook.com/5HighSchoolAgrinioGR/" data-tabs="timeline" data-width="340" data-small-header="true" data-adapt-container-width="true"></div>
        </div>
    </aside>
</div>

<div id="lightbox" onclick="this.style.display='none'"><img id="lightbox-img"></div>

<div id="gallery-popup" onclick="closeGalleryPopup(event)">
    <div class="popup-content">
        <span class="close-btn" onclick="document.getElementById('gallery-popup').style.display='none'">Ã—</span>
        <h2 id="popup-title" style="border:none; margin-bottom: 20px;"></h2>
        <div class="slider-container">
            <button class="nav-btn prev-btn" onclick="changeSlide(-1)">â®</button>
            <img id="slider-img" src="school7.jpg" class="slider-img" onclick="openLightbox(this.src)">
            <button class="nav-btn next-btn" onclick="changeSlide(1)">â¯</button>
        </div>
        <p id="slider-count" style="margin-top: 15px; color: #666; font-size: 0.9rem;"></p>
    </div>
</div>

<script>
    let currentLang = 'el';
    let database = { erasmus: [], awards: [], activities: [], news: [] };
    const SHEET_ID = "1Vxg1fb6tf1xxmJsFe-UgHvxqe9p3cJGEoshYKieCPLM";
    const GIDS = { erasmus: '0', awards: '814179730', activities: '501557146', news: '936502549' };

    // Gallery Slider Data
    let currentSlideIndex = 0;
    const galleryPhotos = ["school7.jpg", "school8.jpg", "school9.jpg", "school10.jpg", "school11.jpg", "school12.jpg", "school13.jpg", "school14.jpg", "school15.jpg"];

    const ui = {
        el: {
            title: "5Î¿ Î“Î•Î› Î‘Î³ÏÎ¹Î½Î¯Î¿Ï…", hero: "5Î¿ Î“ÎµÎ½Î¹ÎºÏŒ Î›ÏÎºÎµÎ¹Î¿ Î‘Î³ÏÎ¹Î½Î¯Î¿Ï…", dir: "Î§Î±Î¹ÏÎµÏ„Î¹ÏƒÎ¼ÏŒÏ‚ Î”Î¹ÎµÏ…Î¸Ï…Î½Ï„Î®", sch: "Î¤Î¿ Î£Ï‡Î¿Î»ÎµÎ¯Î¿", 
            era: "Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î± Erasmus+", awa: "Î”Î¹Î±ÎºÏÎ¯ÏƒÎµÎ¹Ï‚", act: "Î”ÏÎ¬ÏƒÎµÎ¹Ï‚ / Activities", con: "Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±", news: "Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚",
            schLink: "Î©ÏÎ¿Î»ÏŒÎ³Î¹Î¿ Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±", oldNews: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î±Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚", oldEra: "ÎŒÎ»Î± Ï„Î± Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î±", 
            oldAwa: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î´Î¹Î±ÎºÏÎ¯ÏƒÎµÎ¹Ï‚", oldAct: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î´ÏÎ¬ÏƒÎµÎ¹Ï‚", morePhotos: "Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚", popupTitle: "Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚ Î£Ï‡Î¿Î»ÎµÎ¯Î¿Ï…",
            schText: `Î£Ï„Î¿ ÏƒÏ‡Î¿Î»ÎµÎ¯Î¿ Ï†Î¿Î¹Ï„Î¿ÏÎ½ Ï€ÎµÏÎ¯Ï€Î¿Ï… 240 Î¼Î±Î¸Î·Ï„Î­Ï‚ 14-18 ÎµÏ„ÏÎ½ ÎºÎ±Î¹ 25 ÎºÎ±Î¸Î·Î³Î·Ï„Î­Ï‚ Î´Î¹Î±Ï†ÏŒÏÏ‰Î½ ÎµÎ¹Î´Î¹ÎºÎ¿Ï„Î®Ï„Ï‰Î½...`, 
            dirMsg: "Î¦Î¯Î»Îµ ÎµÏ€Î¹ÏƒÎºÎ­Ï€Ï„Î·,\n\nÎšÎ±Î»ÏÏ‚ Î®Î»Î¸ÎµÏ‚ ÏƒÏ„Î¿Î½ Î¹ÏƒÏ„Î¿Ï‡ÏÏÎ¿ Ï„Î¿Ï… Î£Ï‡Î¿Î»ÎµÎ¯Î¿Ï… Î¼Î±Ï‚...\n\nÎŸ Î”Î¹ÎµÏ…Î¸Ï…Î½Ï„Î®Ï‚: Î”Ï. Î¦ÏÏ„Î·Ï‚ Î›Î±Î¶Î±ÏÎ¯Î½Î·Ï‚",
            contact: `<p>ğŸ“ Î•Î¸Î½Î¹ÎºÏŒ Î£Ï„Î¬Î´Î¹Î¿, Î‘Î³ÏÎ¯Î½Î¹Î¿ 30100</p><p>ğŸ“ <a href="tel:+302641048020">+30 26410 48020</a></p><p>ğŸ“§ <a href="mailto:5LykAgrinio@sch.gr">5LykAgrinio@sch.gr</a></p>`
        },
        en: {
            title: "5th Lyceum Agrinio", hero: "5th General Senior High School of Agrinio", dir: "Principal's Welcome", sch: "The School", 
            era: "Erasmus+ Programs", awa: "Awards", act: "Activities", con: "Contact", news: "Announcements",
            schLink: "School Schedule", oldNews: "All Announcements", oldEra: "All Programs", 
            oldAwa: "All Awards", oldAct: "All Activities", morePhotos: "More photos", popupTitle: "School Photos",
            schText: `About 240 students aged 14-18 and 25 teachers of various specialties...`, 
            dirMsg: "Dear visitor,\n\nWelcome to our school's official website...\n\nPrincipal: Dr. Fotis Lazarinis",
            contact: `<p>ğŸ“ National Stadium, Agrinio 30100</p><p>ğŸ“ <a href="tel:+302641048020">+30 26410 48020</a></p><p>ğŸ“§ <a href="mailto:5LykAgrinio@sch.gr">5LykAgrinio@sch.gr</a></p>`
        }
    };

    function toggleLang() {
        currentLang = currentLang === 'el' ? 'en' : 'el';
        document.querySelector('.lang-btn').textContent = currentLang === 'el' ? 'EN' : 'EL';
        renderUI();
    }

    function renderUI() {
        const langData = ui[currentLang];
        document.getElementById('site-title').textContent = langData.title;
        document.getElementById('hero-title').textContent = langData.hero;
        document.getElementById('dir-title').textContent = langData.dir;
        document.getElementById('dir-msg').textContent = langData.dirMsg;
        document.getElementById('sch-title').textContent = langData.sch;
        document.getElementById('sch-text').textContent = langData.schText;
        document.getElementById('sch-link').textContent = langData.schLink;
        document.getElementById('era-title').textContent = langData.era;
        document.getElementById('awa-title').textContent = langData.awa;
        document.getElementById('act-title').textContent = langData.act;
        document.getElementById('con-title').textContent = langData.con;
        document.getElementById('news-title').textContent = langData.news;
        document.getElementById('old-news-btn').textContent = langData.oldNews;
        document.getElementById('old-era-btn').textContent = langData.oldEra;
        document.getElementById('old-awa-btn').textContent = langData.oldAwa;
        document.getElementById('old-act-btn').textContent = langData.oldAct;
        document.getElementById('more-photos-btn').textContent = langData.morePhotos;
        document.getElementById('popup-title').textContent = langData.popupTitle;
        document.getElementById('contact-details').innerHTML = langData.contact;
        
        const navItems = [
            {id: 'home', el: 'Î‘ÏÏ‡Î¹ÎºÎ®', en: 'Home'}, {id: 'news-section', el: 'Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚', en: 'Announcements'},
            {id: 'school', el: 'Î£Ï‡Î¿Î»ÎµÎ¯Î¿', en: 'School'}, {id: 'erasmus', el: 'Erasmus+', en: 'Erasmus+'}, 
            {id: 'awards', el: 'Î”Î¹Î±ÎºÏÎ¯ÏƒÎµÎ¹Ï‚', en: 'Awards'}, {id: 'activities', el: 'Î”ÏÎ¬ÏƒÎµÎ¹Ï‚', en: 'Activities'}, 
            {id: 'contact', el: 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±', en: 'Contact'}
        ];
        document.getElementById('main-nav').innerHTML = navItems.map(item => `<a href="#${item.id}">${item[currentLang]}</a>`).join('');
        
        loadAllData();
        updateSlider();
    }

    async function fetchCSV(gid) {
        const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${gid}`;
        const res = await fetch(url);
        const data = await res.text();
        return data.split(/\r?\n/).slice(1).map(row => 
            row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(s => s.trim().replace(/^"|"$/g, ''))
        ).filter(cols => cols.length > 3);
    }

    async function loadAllData() {
        database.erasmus = await fetchCSV(GIDS.erasmus);
        database.awards = await fetchCSV(GIDS.awards);
        database.activities = await fetchCSV(GIDS.activities);
        database.news = await fetchCSV(GIDS.news);
        renderGrids();
    }

    function renderGrids() {
        document.getElementById('data-erasmus').innerHTML = database.erasmus.slice(0, 9).map(c => `
            <div class="item-card">
                <a href="${c[5]}" target="_blank"><img src="${c[6]}" class="erasmus-logo"></a>
                <div style="padding:15px;">
                    <h3 style="margin:0; font-size:1rem;"><a href="${c[5]}" target="_blank">${currentLang === 'el' ? c[0] : c[1]}</a></h3>
                    <p style="font-size:0.8rem; color:var(--magenta); margin:5px 0;"><b>${c[2]}</b></p>
                    <p style="font-size:0.8rem;">${currentLang === 'el' ? c[3] : c[4]}</p>
                </div>
            </div>`).join('');
        
        document.getElementById('data-awards').innerHTML = database.awards.slice(0, 9).map(c => `
            <div class="item-card">
                <img src="${c[7]}" onclick="openLightbox(this.src)">
                <div style="padding:15px;">
                    <span class="date-badge">${currentLang === 'el' ? c[0] : c[1]}</span>
                    <h3 style="margin:0; font-size:1rem;"><a href="${c[6]}" target="_blank">${currentLang === 'el' ? c[2] : c[3]}</a></h3>
                    <p style="font-size:0.8rem;">${currentLang === 'el' ? c[4] : c[5]}</p>
                </div>
            </div>`).join('');

        document.getElementById('data-activities').innerHTML = database.activities.slice(0, 15).map(c => `
            <div class="item-card">
                <img src="${c[7]}" onclick="openLightbox(this.src)" style="height:120px;">
                <div style="padding:12px;">
                    <span class="date-badge">${currentLang === 'el' ? c[0] : c[1]}</span>
                    <h3 style="margin:0; font-size:0.9rem;"><a href="${c[6]}" target="_blank">${currentLang === 'el' ? c[2] : c[3]}</a></h3>
                </div>
            </div>`).join('');

        document.getElementById('data-news').innerHTML = database.news.slice(0, 5).map(c => `
            <div class="news-item">
                <span class="date-badge">${currentLang === 'el' ? c[0] : c[1]}</span>
                <h4 style="margin:0;"><a href="${c[6]}" target="_blank">${currentLang === 'el' ? c[2] : c[3]}</a></h4>
                <p style="font-size:0.8rem;">${currentLang === 'el' ? c[4] : c[5]}</p>
                ${c[7] ? `<a href="${c[7]}" target="_blank" style="font-size:0.75rem; color:var(--purple); font-weight:bold; text-decoration:none;">ğŸ“ Î£Ï…Î½Î·Î¼Î¼Î­Î½Î¿</a>` : ''}
            </div>`).join('');
    }

    // Slider Navigation
    function changeSlide(direction) {
        currentSlideIndex += direction;
        if (currentSlideIndex < 0) currentSlideIndex = galleryPhotos.length - 1;
        if (currentSlideIndex >= galleryPhotos.length) currentSlideIndex = 0;
        updateSlider();
    }

    function updateSlider() {
        const img = document.getElementById('slider-img');
        if (img) {
            img.src = galleryPhotos[currentSlideIndex];
            document.getElementById('slider-count').textContent = `${currentSlideIndex + 1} / ${galleryPhotos.length}`;
        }
    }

    function showArchive(type) {
        const win = window.open("", "_blank");
        const langData = ui[currentLang];
        const data = database[type];
        let title = langData[type === 'erasmus' ? 'oldEra' : type === 'awards' ? 'oldAwa' : type === 'activities' ? 'oldAct' : 'oldNews'];
        
        let html = `<html><head><title>${title}</title><style>
            body { font-family: sans-serif; padding: 20px; }
            table { width: 100%; border-collapse: collapse; }
            th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
            th { background: #3f51b5; color: white; }
            a { color: #e91e63; font-weight: bold; text-decoration: none; }
        </style></head><body><h2>${title}</h2><table><tr><th>Info</th><th>Title</th><th>Description</th><th>Link</th></tr>`;
        
        data.forEach(c => {
            if (type === 'erasmus') {
                html += `<tr><td>${c[2]}</td><td><a href="${c[5]}" target="_blank">${currentLang === 'el' ? c[0] : c[1]}</a></td><td>${currentLang === 'el' ? c[3] : c[4]}</td><td><a href="${c[5]}" target="_blank">ğŸ”—</a></td></tr>`;
            } else {
                html += `<tr><td>${currentLang === 'el' ? c[0] : c[1]}</td><td><a href="${c[6]}" target="_blank">${currentLang === 'el' ? c[2] : c[3]}</a></td><td>${currentLang === 'el' ? c[4] : c[5]}</td><td>${c[7] ? `<a href="${c[7]}" target="_blank">ğŸ“</a>` : '-'}</td></tr>`;
            }
        });
        html += `</table></body></html>`;
        win.document.write(html); win.document.close();
    }

    function openGalleryPopup() { document.getElementById('gallery-popup').style.display = 'flex'; }
    function closeGalleryPopup(e) { if(e.target.id === 'gallery-popup') document.getElementById('gallery-popup').style.display = 'none'; }
    function openLightbox(src) { document.getElementById('lightbox-img').src = src; document.getElementById('lightbox').style.display = 'flex'; }

    renderUI();
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/el_GR/sdk.js#xfbml=1&version=v18.0"></script>
</body>
</html>
